name: Cleanup workflow runs
on:
  workflow_dispatch: {}
jobs:
  cleanup:
    name: Delete all previous workflow runs
    runs-on: ubuntu-latest
    steps:
      - name: Delete
        run: gh run list --json databaseId  -q '.[].databaseId' | xargs -IID gh api \
            "repos/$(gh repo view --json nameWithOwner -q .nameWithOwner)/actions/runs/ID" \
            -X DELETE
      